<nav id="p-nav"class="header-top topnav fixed-top navbar navbar-expand-lg navbar-light bg-light">
  <a class="navbar-brand brand" id="brand" href="/">High Thrills Entertainment Park</a>
  <button class="navbar-toggler float-right" type="button" data-toggle="collapse" data-target="#navbarNav" aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
    <span class="navbar-toggler-icon"></span>
  </button>
  <div class="collapse navbar-collapse" id="navbarNav">
    <ul class="navbar-nav mr-auto">
      <li class="nav-item">
        <a class="nav-link" href="/restaurants">Restaurants</a>
      </li>
      <li class="nav-item">
        <a class="nav-link" href="/rides">Rides</a>
      </li>
    </ul>
    <span id="account">
      <button class="nav-item btn btn-outline-primary mr-2" data-toggle="modal" data-target="#signUpModal">Sign Up</button>
      <button class="nav-item btn btn-outline-success" data-toggle="modal" data-target="#loginModal">Log In</button>
      </span>
  </div>
  <script src="https://code.jquery.com/jquery-git.js"></script>
  <script>
    if(document.cookie.indexOf("name") != -1) {
      $("#account").children().remove();
      const account = '<div class="dropdown dropleft"> \
        <button class="btn btn-danger dropdown-toggle" type="button" id="dropdownMenuButton" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">';
      const accountnext = '</button> \
        <div class="dropdown-menu" aria-labelledby="dropdownMenuButton"> \
          <a class="dropdown-item" href="/itinerary">Itinerary</a> \
          <a class="dropdown-item" href="/logout">Log Out</a> \
        </div> \
      </div>';
      //old way didn't work
      //const name = document.cookie.split('=')[1];
      const name = document.cookie.slice(document.cookie.indexOf("name=") + 5, document.cookie.length);
      $("#account").html(account + name + accountnext);
    }
    else if (document.cookie.indexOf("ERROR=") != -1){

      var errorCode = document.cookie.slice(document.cookie.indexOf("ERROR=") + 6, document.cookie.length);
      switch (errorCode){

        case "1":
          window.alert("Sign Up Failed: Invalid email address (Error code: 1)");
          break;
        case "2":
          window.alert("Sign Up Failed: Password does not meet requirements (Error Code: 2)");
          break;
        case "3":
          window.alert("Sign Up Failed: Email already linked with existing account (Error Code: 3)");
          break;
        case "4":
          window.alert("Sign In Failed: Invalid email or password (Error Code: 4)");
          break;

      }


    }
  </script>
</nav>

<!--The Sign Up Modal-->
<div class="modal fade" id="signUpModal" tabindex="-1" role="dialog" aria-labelledby="exampleModalCenterTitle" aria-hidden="true">
  <div class="modal-dialog modal-dialog-centered" role="document">
  <div class="modal-content">
      <div class="modal-header">
      <h5 class="modal-title" id="exampleModalLongTitle">Log In</h5>
      <button type="button" class="close" data-dismiss="modal" aria-label="Close">
          <span aria-hidden="true">&times;</span>
      </button>
      </div>
      <div class="modal-body">
        <form method="POST" action="/signup">
          <input for="uname" name="email" type="text" placeholder="Email"/>
          <input for="pwd" name="pwd" type="password" placeholder="Password"/>
          <input for="repeatPwd" name="repeatPwd" type="password" placeholder="Repeat Password"/>
          <input for="nickname" name="nickname" type="text" value="" placeholder="Nickname (Optional)"/>
          <button type="submit" class="btn btn-primary">SUBMIT</button>
        </form>
      </div>
      <div class="modal-footer">
      <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
      <!--<button type="button" class="btn btn-primary">GO</button>-->
      </div>
  </div>
  </div>
</div>


<div class="modal fade" id="loginModal" tabindex="-1" role="dialog" aria-labelledby="exampleModalCenterTitle" aria-hidden="true">
  <div class="modal-dialog modal-dialog-centered" role="document">
  <div class="modal-content">
      <div class="modal-header">
      <h5 class="modal-title" id="exampleModalLongTitle">Log In</h5>
      <button type="button" class="close" data-dismiss="modal" aria-label="Close">
          <span aria-hidden="true">&times;</span>
      </button>
      </div>
      <div class="modal-body">
        <form method="POST" action="/login">
          <input for="uname" name="uname" type="text" placeholder="Username"/>
          <input for="pwd" name="pwd" type="password" placeholder="Password"/>
          <button type="submit" class="btn btn-primary">SUBMIT</button>
        </form>
        <script src="https://apis.google.com/js/platform.js" async defer></script>
       <meta name="google-signin-client_id" content="670268468186-s7jhd7bhkmnpssqe9r3rbsulde7p8a4h.apps.googleusercontent.com">
       <div class="g-signin2" data-onsuccess="onSignIn"></div>
      </div>
      <div class="modal-footer">
      <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
      <!--<button type="button" class="btn btn-primary">GO</button>-->
      </div>
  </div>
  </div>
</div>
